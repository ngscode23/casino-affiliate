<!doctype html>
whenIdentity((ni)=>{
>>   ni.on('init',(user)=>{
>>     const h=location.hash||'';
>>     if(!user && h.includes('invite_token')) ni.open('signup');
>>     if(!user && h.includes('recovery_token')) ni.open('recovery');
>>   });
>>   ni.on('login',()=>{ history.replaceState(null,'','/admin/'); location.reload(); });
>>   ni.init();
>> });
(function () {
>>   const h = location.hash || '';
>>   if ((h.startsWith('#invite_token=') || h.startsWith('#recovery_token=')) && !location.pathname.startsWith('/admin/')) {
>>     location.replace('/admin/' + h);